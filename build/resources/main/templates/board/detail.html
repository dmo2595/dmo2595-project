<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>Board Detail</title>
  <link rel="stylesheet" th:href="@{/css/styles.css}" />
</head>
<body>
<div th:replace="fragments/layout :: header"></div>
<div>
  <h1 th:text="${board.title}"></h1>
  <p th:text="'Author: ' + ${board.authorName} + '[' + ${board.authorId} + ']'"></p>
  <p th:text="'Views: ' + ${board.views}"></p>
  <div th:text="${board.content}"></div>
  <div>
    <button th:if="${#authentication.principal?.username != null}"
            th:onclick="'likePost(' + ${board.id} + ');'">Like</button>
    <span th:text="'Likes: ' + ${board.likes}"></span>
  </div>
  <h2>Comments</h2>
  <div th:each="comment : ${comments}">
    <p th:text="${comment.authorName} + '[' + ${comment.authorId} + '] : ' + ${comment.content}"></p>
    <button th:if="${#authentication.principal?.username != null}"
            th:onclick="'likeComment(' + ${comment.id} + ');'">Like</button>
    <span th:text="'Likes: ' + ${comment.likes}"></span>
    <span th:if="${#authentication.principal?.username == comment.authorId}">
                <a th:href="@{/comment/delete/{id}(id=${comment.id})}">Delete</a>
            </span>
  </div>
  <div th:if="${#authentication.principal?.username != null}">
    <h3>New Comment</h3>
    <form th:action="@{/comment/new}" method="post">
      <input type="hidden" name="boardId" th:value="${board.id}" />
      <textarea name="content"></textarea>
      <button type="submit">Submit</button>
    </form>
  </div>
</div>
<div th:replace="fragments/layout :: footer"></div>
</body>
</html>
